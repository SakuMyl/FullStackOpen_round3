(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(38)},18:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(11),c=t.n(r),i=(t(18),t(2)),o=t(3),l=t.n(o),m="/api/persons",s=function(){return u.a.createElement("button",{type:"submit",className:"submitButton"},"lis\xe4\xe4")},f=function(e){var n=e.message,t=e.type;return null===n?null:u.a.createElement("div",{className:t},n)},d=function(e){var n=e.name;return u.a.createElement("h1",null,n)},h=function(e){return u.a.createElement("div",null,"Rajaa n\xe4ytett\xe4vi\xe4: ",u.a.createElement("input",{value:e.constraint,onChange:e.handleChange}))},p=function(e){return u.a.createElement("div",null,u.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",null,"nimi: ",u.a.createElement("input",{value:e.name,onChange:e.handleNameChange})),u.a.createElement("div",null,"numero: ",u.a.createElement("input",{value:e.number,onChange:e.handleNumberChange})),u.a.createElement("div",null,u.a.createElement(s,{text:"lis\xe4\xe4"}))))},v=function(e){var n=e.persons;return u.a.createElement("div",null,u.a.createElement("h2",null,"Numerot"),n)},b=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),o=Object(i.a)(c,2),s=o[0],b=o[1],E=Object(a.useState)(""),g=Object(i.a)(E,2),j=g[0],w=g[1],C=Object(a.useState)(""),y=Object(i.a)(C,2),O=y[0],S=y[1],k=Object(a.useState)({message:null,error:!1}),N=Object(i.a)(k,2),P=N[0],L=N[1];Object(a.useEffect)(function(){l.a.get(m).then(function(e){return e.data}).then(function(e){return r(e)})},[]);var x=function(e){L(e),setTimeout(function(){L({message:null})},5e3)},B=function(e){var n;window.confirm("Poistetaanko ".concat(e.name,"?"))&&((n=e.id,l.a.delete("".concat(m,"/").concat(n)).then(function(e){return e.data})).then(function(){return r(t.filter(function(n){return n.id!==e.id}))}),x({message:"Poistettiin ".concat(e.name),type:"notification"}))};return u.a.createElement("div",null,u.a.createElement(d,{name:"Puhelinluettelo"}),u.a.createElement(f,{message:P.message,type:P.type}),u.a.createElement(h,{constraint:O,handleChange:function(e){S(e.target.value)}}),u.a.createElement(p,{name:s,number:j,handleSubmit:function(e){e.preventDefault();var n,a,u={name:s,number:j};if(t.map(function(e){return e.name}).includes(s)){if(window.confirm("".concat(s," on jo luettelossa, korvataanko vanha numero uudella?"))){var c=t.find(function(e){return e.name===u.name});(n=c.id,a=u,l.a.put("".concat(m,"/").concat(n),a).then(function(e){return e.data})).then(function(e){return r(t.map(function(n){return n.name===u.name?e:n}))}).catch(function(){return x({message:"".concat(u.name," oli jo poistettu"),type:"error"})}),b(""),w(""),x({message:"P\xe4ivitettiin ".concat(u.name),type:"notification"})}}else u.name&&u.number?(function(e){return l.a.post(m,e).then(function(e){return e.data})}(u).then(function(e){return r(t.concat(e))}),b(""),w(""),x({message:"Lis\xe4ttiin ".concat(u.name),type:"notification"})):window.alert("Anna nimi ja numero!")},handleNumberChange:function(e){w(e.target.value)},handleNameChange:function(e){b(e.target.value)}}),u.a.createElement(v,{persons:t.filter(function(e){return function(e){return"".concat(e.name.toLowerCase()," ").concat(e.number)}(e).includes(O.toLowerCase())}).map(function(e){return u.a.createElement("div",{key:e.id},u.a.createElement("span",null,e.name," ",e.number," "),u.a.createElement("button",{onClick:function(){return B(e)}},"Poista"))})}))};c.a.render(u.a.createElement(b,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.220f34f2.chunk.js.map