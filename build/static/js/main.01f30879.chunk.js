(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,n,t){e.exports=t(38)},18:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(11),c=t.n(r),o=(t(18),t(2)),i=t(3),l=t.n(i),m="/api/persons",s=function(){return u.a.createElement("button",{type:"submit",className:"submitButton"},"lis\xe4\xe4")},f=function(e){var n=e.message,t=e.type;return null===n?null:u.a.createElement("div",{className:t},n)},d=function(e){var n=e.name;return u.a.createElement("h1",null,n)},h=function(e){return u.a.createElement("div",null,"Rajaa n\xe4ytett\xe4vi\xe4: ",u.a.createElement("input",{value:e.constraint,onChange:e.handleChange}))},p=function(e){return u.a.createElement("div",null,u.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),u.a.createElement("form",{onSubmit:e.handleSubmit},u.a.createElement("div",null,"nimi: ",u.a.createElement("input",{value:e.name,onChange:e.handleNameChange})),u.a.createElement("div",null,"numero: ",u.a.createElement("input",{value:e.number,onChange:e.handleNumberChange})),u.a.createElement("div",null,u.a.createElement(s,{text:"lis\xe4\xe4"}))))},v=function(e){var n=e.persons;return u.a.createElement("div",null,u.a.createElement("h2",null,"Numerot"),n)},E=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),s=i[0],E=i[1],b=Object(a.useState)(""),g=Object(o.a)(b,2),j=g[0],y=g[1],w=Object(a.useState)(""),C=Object(o.a)(w,2),O=C[0],S=C[1],k=Object(a.useState)({message:null,type:"notification"}),N=Object(o.a)(k,2),P=N[0],L=N[1];Object(a.useEffect)(function(){l.a.get(m).then(function(e){return e.data}).then(function(e){return r(e)})},[]);var x=function(e){L(e),setTimeout(function(){L({message:null})},5e3)},B=function(e){var n;window.confirm("Poistetaanko ".concat(e.name,"?"))&&((n=e.id,l.a.delete("".concat(m,"/").concat(n)).then(function(e){return e.data})).then(function(){return r(t.filter(function(n){return n.id!==e.id}))}),x({message:"Poistettiin ".concat(e.name),type:"notification"}))};return u.a.createElement("div",null,u.a.createElement(d,{name:"Puhelinluettelo"}),u.a.createElement(f,{message:P.message,type:P.type}),u.a.createElement(h,{constraint:O,handleChange:function(e){S(e.target.value)}}),u.a.createElement(p,{name:s,number:j,handleSubmit:function(e){e.preventDefault();var n,a={name:s,number:j};t.map(function(e){return e.name}).includes(s)?window.confirm("".concat(s," on jo luettelossa, korvataanko vanha numero uudella?"))&&(function(e,n){var t="".concat(m,"/").concat(e);return console.log(t),l.a.put(t,n).then(function(e){return e.data})}(t.find(function(e){return e.name===a.name}).id,a).then(function(e){return r(t.map(function(n){return n.name===a.name?e:n}))}).catch(function(e){x({message:"".concat(a.name," oli jo poistettu"),type:"error"})}),E(""),y(""),x({message:"P\xe4ivitettiin ".concat(a.name),type:"notification"})):(n=a,l.a.post(m,n).then(function(e){return e.data})).then(function(e){r(t.concat(e)),x({message:"Lis\xe4ttiin ".concat(a.name),type:"notification"}),E(""),y("")}).catch(function(e){x({message:e.response.data.error,type:"error"})})},handleNumberChange:function(e){y(e.target.value)},handleNameChange:function(e){E(e.target.value)}}),u.a.createElement(v,{persons:t.filter(function(e){return function(e){return"".concat(e.name.toLowerCase()," ").concat(e.number)}(e).includes(O.toLowerCase())}).map(function(e){return u.a.createElement("div",{key:e.id},u.a.createElement("span",null,e.name," ",e.number," "),u.a.createElement("button",{onClick:function(){return B(e)}},"Poista"))})}))};c.a.render(u.a.createElement(E,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.01f30879.chunk.js.map